(this["webpackJsonpsearch-bar-component"]=this["webpackJsonpsearch-bar-component"]||[]).push([[0],{168:function(e,t,a){},169:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(11),r=a.n(i),c=(a(93),a(94),a(20)),o=a(21),l=a(23),d=a(22),u=a(79),p=a(80),h=a(78),b=(a(95),a(73)),m=a.n(b),j=a(67),f=a.n(j),v=a(66),x=a.n(v),g=function(e){var t=x.a.create({baseURL:e?"http://clapp1-dev.eba-bfkixsew.us-east-2.elasticbeanstalk.com/":"https://clues.engin.umich.edu/"});return{searchEnable:function(e,a){return t.post("api/search_enable/",{enabled:e,class_id:a})},uploadNotificationEnable:function(e,a,n){return t.post("api/upload_notification_enable/",{enabled:e,class_id:a,user_id:n})},weeklyReportEnable:function(e,a,n){return t.post("api/weekly_report_enable/",{enabled:e,class_id:a,user_id:n})},getLeccapClass:function(e){return t.get("api/get_class_leccap/",{leccap_site_key:e})},getUser:function(e){return t.get("api/get_user/",{email:e})},getUserClassSettings:function(e,a){return t.get("api/get_user_class_settings/",{user_id:e,class_id:a})},search:function(e,a){return t.get("api/search/",{class_id:e,q:a})},getVidTranscript:function(e){return t.get("api/get_vid_transcript/",{vid_id:e})},leccapLogin:function(e){return t.post("api/leccap_login/",{message:e})}}},O=a(2),_=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).fetchTranscript=function(){var e=n.props,t=e.vid,a=e.dev;g(a).getVidTranscript(t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(e){n.setState({transcript:e.transcript.full_transcript})})).catch((function(e){return console.error(e)}))},n.viewFullTranscript=function(e){e.preventDefault(),""===n.state.transcript&&n.fetchTranscript(),n.setState({expand:!0,videoStartTime:0,display:"transcript",autoplay:!1})},n.expandAndPlay=function(e){e.preventDefault(),""===n.state.transcript&&n.fetchTranscript(),n.setState({expand:!0,videoStartTime:0,display:"moments",autoplay:!0})},n.toggleExpandShrink=function(e){e.preventDefault();var t=n.state,a=t.expand;""===t.transcript&&n.fetchTranscript(),n.setState({expand:!a,videoStartTime:0,display:"moments",autoplay:!1})},n.jumpToTimeAt=function(e,t){e.preventDefault(),n.setState({videoStartTime:t,autoplay:!0})},n.displayTranscript=function(e){e.preventDefault(),""===n.state.transcript&&n.fetchTranscript(),n.setState({display:"transcript"})},n.displayTimeContext=function(e){e.preventDefault(),n.setState({display:"moments"})},n.state={expand:!1,autoplay:!1,videoStartTime:0,transcript:"",display:"moments"},n}return Object(o.a)(a,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.name,s=a.date,i=a.imageUrl,r=a.videoUrl,c=a.timestamps,o=a.uploadSrc,l=a.embedToken,d=this.state,u=d.expand,p=d.autoplay,b=d.videoStartTime,j=d.transcript,v=d.display,x="leccap"===o?"".concat(r,"?identity=").concat(l,"&mode=embed#goto=").concat(b):r.replace("watch?v=","embed/"),g=[],_=[],y={},k=Object(h.a)(c);try{for(k.s();!(e=k.n()).done;){var T=e.value,N=Math.floor(+Object.keys(T)[0]),S=Object.values(T)[0].context;g.push(N),_.push(S),y[N]=S}}catch(C){k.e(C)}finally{k.f()}var w=0,E=Object.entries(y).map((function(e){return Object(O.jsxs)("div",{className:"time-context-item",onClick:function(a){return t.jumpToTimeAt(a,e[0])},children:[Object(O.jsx)("div",{className:"time",children:new Date(1e3*e[0]).toISOString().substr(11,8)}),Object(O.jsx)("div",{className:"context",children:e[1]})]},w++)}));return Object(O.jsxs)("div",{className:"search-result-entry",children:[u?Object(O.jsxs)("div",{className:"video-player",children:[Object(O.jsx)("iframe",{src:"leccap"===o?"".concat(x):p?x+"?start=".concat(b,"&rel=0&autoplay=1"):x+"?start=".concat(b,"&rel=0&autoplay=0"),loading:"lazy",title:n,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"600px",height:"400px"}),Object(O.jsx)("div",{className:"video-player-footer"})]}):Object(O.jsx)("img",{src:i,onClick:this.expandAndPlay,alt:""===i?"Lecture thumbnail does not exist":n,width:"450px",height:"300px"}),Object(O.jsxs)("div",{className:"entry-details",children:[Object(O.jsx)("span",{className:"video-name",children:n}),Object(O.jsx)("span",{className:"video-date",children:s.substring(5,s.length-13)}),u?Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"nav-buttons",children:[Object(O.jsx)("button",{className:"moments"===v?"selected-button":"moments-button",type:"submit",onClick:this.displayTimeContext,children:"Moments"}),Object(O.jsx)("button",{className:"transcript"===v?"selected-button":"transcript-button",type:"submit",onClick:this.displayTranscript,children:"Transcript"})]}),"moments"===v?Object(O.jsx)("div",{className:"time-context-entries",children:E}):Object(O.jsx)("div",{className:"full-transcript",children:j})]}):Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"first-context",children:_[0]}),Object(O.jsx)("button",{className:"view-transcript-button",type:"submit",onClick:this.viewFullTranscript,children:"View Full Transcript"})]}),Object(O.jsxs)("footer",{className:"entry-details-fotter",children:[Object(O.jsx)("button",{className:"new-tab-button",type:"submit",children:"Open in a new tab"}),Object(O.jsx)("button",{className:"expand-shrink-button",type:"submit",onClick:this.toggleExpandShrink,children:u?Object(O.jsx)(f.a,{color:"action"}):Object(O.jsx)(m.a,{color:"action"})})]})]})]})}}]),a}(s.a.Component),y=(a(168),a(200)),k=a(196),T=function(e){var t=e.displayTerm;return Object(O.jsx)("div",{className:"error-msg",children:Object(O.jsxs)(y.a,{severity:"warning",children:[Object(O.jsx)(k.a,{className:"msg",children:Object(O.jsx)("strong",{children:'Your search term "'.concat(t,'" did not match any recordings, please try again.')})}),Object(O.jsxs)("div",{className:"suggestion",children:[Object(O.jsx)("strong",{children:"Suggestions:"}),Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:"Check the spellings"}),Object(O.jsx)("li",{children:"Try a different term"}),Object(O.jsx)("li",{children:"Try a shorter term"})]})]})]})})},N=a(197),S=a(198),w=a(202),E=a(203),C=a(199),U=(a(74),a(169),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleEnableSearch=function(){var e=n.props,t=e.class_id,a=e.dev,s=n.state.search_enabled,i=!1;s||(i=!0),n.setState({search_enabled:i}),g(a).searchEnable(i,t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){n.setState({search_enabled:!i})}))},n.handleUploadNotifications=function(){var e=n.state.upload_notifications,t=n.props,a=t.class_id,s=t.user_id,i=t.dev,r=!1;e||(r=!0),n.setState({upload_notifications:r}),g(i).uploadNotificationEnable(r,a,s).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){n.setState({upload_notifications:!r})}))},n.handleWeeklyReports=function(){var e=n.state.weekly_reports,t=n.props,a=t.class_id,s=t.user_id,i=t.dev,r=!1;e||(r=!0),n.setState({weekly_reports:r}),g(i).weeklyReportEnable(r,a,s).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){n.setState({weekly_reports:!e.reports_enabled})}))},n.toggleSettings=function(e){e.preventDefault();var t=n.state.expand;n.setState({expand:!t})},n.state={expand:!0,search_enabled:n.props.search_enabled,weekly_reports:n.props.weekly_reports,upload_notifications:n.props.upload_notifications,initial_disable:n.props.initial_disable},n}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.expand,a=e.search_enabled,n=this.props.initial_disable;return Object(O.jsx)("div",{className:"settings",children:t?Object(O.jsx)(N.a,{className:"settings-options",children:Object(O.jsx)(C.a,{title:"You can disable student search during quizs or exams",placement:"bottom-start",children:Object(O.jsx)(S.a,{disabled:n,control:Object(O.jsx)(w.a,{checked:a,onChange:this.handleEnableSearch,name:"search_enabled",color:"primary"}),label:"Enable Student Searches"})})}):""})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.initial_disable!==t.initial_disable?{search_enabled:e.search_enabled,weekly_reports:e.weekly_reports,upload_notifications:e.upload_notifications,initial_disable:e.initial_disable}:null}}]),a}(s.a.Component)),R=a.p+"static/media/logo.90a3a46e.png",V=(a(171),function(){return Object(O.jsxs)("div",{className:"logo-spinner",children:[Object(O.jsx)("img",{className:"logo",src:R,alt:"logo",width:"300px"}),Object(O.jsx)("div",{className:"dot-pulse"})]})}),D=(a(172),a.p+"static/media/logo_icon.01b372da.png"),F=a(76),q=a.n(F),W=a(77),Z=a.n(W),M=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.searchCount,s=t.class_id,i=t.queryTerm;""!==i&&(n.setState({loading:!0}),g(n.props.dev).search(s,i).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(e){e.recordings[i]&&0!==Object.keys(e.recordings[i]).length?n.setState({searchCount:a+1,definition:e.definition,apiResponse:e.recordings[i],displayTerm:i,error:!1,loading:!1}):n.setState({error:!0,displayTerm:i,loading:!1})})).catch((function(e){return console.error(e)})))},n.handleChange=function(e){e.preventDefault(),n.setState({queryTerm:e.target.value})},n.clearSearch=function(e){e.preventDefault(),n.setState({searchCount:0,error:!1,queryTerm:"",loading:!1})},n.state={searchCount:0,apiResponse:{},queryTerm:"",displayTerm:"",definition:"",error:!1,loading:!1,class_id:null,user_id:null,email:n.props.unique_name+"@umich.edu",site_key:n.props.site_key,search_enabled:!1,weekly_reports:!1,upload_notifications:!1,initial_disable:!0},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=null,a=null;g(this.props.dev).getLeccapClass(this.state.site_key).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(n){e.setState({search_enabled:n.search_enabled,class_id:n.class_id}),t=n.class_id,g(e.props.dev).getUser(e.state.email).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(n){e.setState({user_id:n.user_id}),a=n.user_id,g(e.props.dev).getUserClassSettings(a,t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(t){e.setState({initial_disable:!1,upload_notifications:t.upload_notification,weekly_reports:t.weekly_report})}))}))})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this,t=function(){return Object(O.jsxs)(E.a,{className:"feedback-button",href:"https://forms.gle/PRZDceU3AfWmZW7j9",target:"_blank",rel:"noopener noreferrer",children:[Object(O.jsx)("span",{children:" Send Feedback "}),Object(O.jsx)(q.a,{})]})},a=this.state,n=a.searchCount,s=a.apiResponse,i=a.displayTerm,r=a.error,c=a.loading,o=Object(p.a)(a,["searchCount","apiResponse","displayTerm","error","loading"]),l=Object(O.jsx)("div",{className:"header",children:Object(O.jsxs)("form",{className:"search-form",onSubmit:this.handleSubmit,children:[Object(O.jsxs)("div",{className:"search-flex",children:[Object(O.jsx)("img",{className:"logo-icon",src:D,alt:"logoIcon",width:"50px",onClick:this.clearSearch}),Object(O.jsx)("input",{className:"search-bar",placeholder:"Search for a term or phrase",onChange:this.handleChange,type:"text",value:this.state.queryTerm}),Object(O.jsx)("button",{className:"search-button",type:"submit",onSubmit:this.handleSubmit,children:Object(O.jsx)(Z.a,{color:"action"})}),this.props.owner_manager?Object(O.jsx)(U,Object(u.a)({dev:this.props.dev},o)):""]}),Object(O.jsx)(t,{})]})}),d=0,h=Object.keys(s).map((function(t){return Object(O.jsx)(_,{vid:t,name:s[t].title,date:s[t].vid_date,imageUrl:s[t].image,videoUrl:s[t].video_link,embedToken:e.props.embedToken,timestamps:s[t].timestamps,uploadSrc:s[t].upload_src,dev:e.props.dev},d++)}));return c?Object(O.jsx)(V,{}):r?Object(O.jsxs)("div",{children:[l,Object(O.jsx)(T,{displayTerm:i})]}):0===n?Object(O.jsx)("div",{children:l}):Object(O.jsxs)("div",{children:[l,Object(O.jsxs)("div",{className:"search-results",children:[Object(O.jsxs)("div",{className:"term-definition",children:[Object(O.jsx)("div",{className:"term",children:'Term: "'.concat(i,'"')}),Object(O.jsx)("div",{className:"definition",children:"".concat(this.state.definition)})]}),Object(O.jsx)("div",{className:"result-list",children:h})]})]})}}]),a}(s.a.Component),Y=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={site_key:null,uniquename:null,owner_manager:!1},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.userToken,n=t.dev;g(n).leccapLogin(a).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(t){e.setState({site_key:t.site_key,uniquename:t.uniquename,owner_manager:t.success})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.site_key,a=e.uniquename;return null===t||null===a?Object(O.jsx)(V,{}):Object(O.jsx)("div",{children:Object(O.jsx)(M,{site_key:t,unique_name:a,embedToken:this.props.embedToken,owner_manager:this.state.owner_manager,dev:this.props.dev})})}}]),a}(s.a.Component);var L=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(Y,{userToken:"ekx4TFF5QVJiL2l6dW9jclRoRTNSOUxqMDN4ZmoxZjRlaGlRUmJJb3kzRXhGNEhjeW5BUU5QQ0dkY2VGWjhteHhXVDRKbWhIRjdMcEVRenFYZndDMFFySll3NXVmRVVma1hVckFnSi9BNWVQUU1CajZxMmFaYzMxWmxkUFRqY2g5VEpEWTU3V0N3bHdMWU1CWGN2aTdia3Ztbk9RQ0NobzBTWTRoN0E9",embedToken:"SERhZm5taTFiYm9aejFJUDNsOENVaEpXYWN4Z0hGZUlnU3U1VExlaVA1VXVYa3BuZnlyNEg1UzJNY2NoOUZ0VndEY3RyTGNXNThsbkN4SnlVVlpEKzdLZkhvakt2eEE9",dev:!0})})},z=(a(173),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,205)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),i(e),r(e)}))});r.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(L,{})}),document.getElementById("root")),z()},93:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){}},[[174,1,2]]]);
//# sourceMappingURL=main.10fe26f9.chunk.js.map