(this["webpackJsonpsearch-bar-component"]=this["webpackJsonpsearch-bar-component"]||[]).push([[0],{168:function(e,t,n){},169:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(11),i=n.n(r),c=(n(93),n(94),n(20)),o=n(21),l=n(23),d=n(22),u=n(79),p=n(80),h=n(78),b=(n(95),n(73)),m=n.n(b),j=n(67),_=n.n(j),f=n(66),v=n.n(f),x=function(e){var t=v.a.create({baseURL:e?"http://clapp1-dev.eba-bfkixsew.us-east-2.elasticbeanstalk.com/":"https://clues.engin.umich.edu/"});return{searchEnable:function(e,n){return t.post("api/search_enable/",{enabled:e,class_id:n})},uploadNotificationEnable:function(e,n,a){return t.post("api/upload_notification_enable/",{enabled:e,class_id:n,user_id:a})},weeklyReportEnable:function(e,n,a){return t.post("api/weekly_report_enable/",{enabled:e,class_id:n,user_id:a})},getLeccapClass:function(e){return t.get("api/get_class_leccap/",{leccap_site_key:e})},getUser:function(e){return t.get("api/get_user/",{email:e})},getUserClassSettings:function(e,n){return t.get("api/get_user_class_settings/",{user_id:e,class_id:n})},search:function(e,n){return t.get("api/search/",{class_id:e,q:n})},getVidTranscript:function(e){return t.get("api/get_vid_transcript/",{vid_id:e})},leccapLogin:function(e){return t.post("api/leccap_login/",{message:e})}}},g=n(2),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).fetchTranscript=function(){var e=a.props,t=e.vid,n=e.dev;x(n).getVidTranscript(t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(e){a.setState({transcript:e.transcript.full_transcript})})).catch((function(e){return console.error(e)}))},a.viewFullTranscript=function(e){e.preventDefault(),""===a.state.transcript&&a.fetchTranscript(),a.setState({expand:!0,videoStartTime:0,display:"moments",autoplay:!1})},a.expandAndPlay=function(e){e.preventDefault(),""===a.state.transcript&&a.fetchTranscript(),a.setState({expand:!0,videoStartTime:0,display:"moments",autoplay:!0})},a.toggleExpandShrink=function(e){e.preventDefault();var t=a.state,n=t.expand;""===t.transcript&&a.fetchTranscript(),a.setState({expand:!n,videoStartTime:0,display:"moments",autoplay:!1})},a.jumpToTimeAt=function(e,t){e.preventDefault(),a.setState({videoStartTime:t,autoplay:!0})},a.displayTranscript=function(e){e.preventDefault(),""===a.state.transcript&&a.fetchTranscript(),a.setState({display:"transcript"})},a.displayTimeContext=function(e){e.preventDefault(),a.setState({display:"moments"})},a.state={expand:!1,autoplay:!1,videoStartTime:0,transcript:"",display:"moments"},a}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.name,s=n.date,r=n.imageUrl,i=n.videoUrl,c=n.timestamps,o=n.uploadSrc,l=n.embedToken,d=this.state,u=d.expand,p=d.autoplay,b=d.videoStartTime,j=d.transcript,f=d.display,v="leccap"===o?"".concat(i,"?identity=").concat(l,"&mode=embed#goto=").concat(b):i.replace("watch?v=","embed/"),x=[],O=[],y={},k=Object(h.a)(c);try{for(k.s();!(e=k.n()).done;){var S=e.value,T=Math.floor(+Object.keys(S)[0]),N=Object.values(S)[0].context;x.push(T),O.push(N),y[T]=N}}catch(E){k.e(E)}finally{k.f()}var w=0,C=Object.entries(y).map((function(e){return Object(g.jsxs)("div",{className:"time-context-item",onClick:function(n){return t.jumpToTimeAt(n,e[0])},children:[Object(g.jsx)("div",{className:"time",children:new Date(1e3*e[0]).toISOString().substr(11,8)}),Object(g.jsx)("div",{className:"context",children:'"'.concat(e[1],'"')})]},w++)}));return Object(g.jsxs)("div",{className:"search-result-entry",children:[u?Object(g.jsxs)("div",{className:"video-player",children:[Object(g.jsx)("iframe",{src:"leccap"===o?"".concat(v):p?v+"?start=".concat(b,"&rel=0&autoplay=1"):v+"?start=".concat(b,"&rel=0&autoplay=0"),loading:"lazy",title:a,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"600px",height:"400px"}),Object(g.jsx)("div",{className:"video-player-footer"})]}):Object(g.jsx)("img",{src:r,onClick:this.expandAndPlay,alt:""===r?"Lecture thumbnail does not exist":a,width:"450px",height:"300px"}),Object(g.jsxs)("div",{className:"entry-details",children:[Object(g.jsx)("span",{className:"video-name",children:a}),Object(g.jsx)("span",{className:"video-date",children:s.substring(5,s.length-13)}),u?Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"nav-buttons",children:[Object(g.jsx)("button",{className:"moments"===f?"selected-button":"moments-button",type:"submit",onClick:this.displayTimeContext,children:"Moments"}),Object(g.jsx)("button",{className:"transcript"===f?"selected-button":"transcript-button",type:"submit",onClick:this.displayTranscript,children:"Transcript"})]}),"moments"===f?Object(g.jsx)("div",{className:"time-context-entries",children:C}):Object(g.jsx)("div",{className:"full-transcript",children:j})]}):Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"first-context",children:O[0]}),Object(g.jsx)("button",{className:"view-transcript-button",type:"submit",onClick:this.viewFullTranscript,children:"View Relevant Moments"})]}),Object(g.jsxs)("footer",{className:"entry-details-fotter",children:[Object(g.jsx)("button",{className:"new-tab-button",type:"submit",children:"Open in a new tab"}),Object(g.jsx)("button",{className:"expand-shrink-button",type:"submit",onClick:this.toggleExpandShrink,children:u?Object(g.jsx)(_.a,{color:"action"}):Object(g.jsx)(m.a,{color:"action"})})]})]})]})}}]),n}(s.a.Component),y=(n(168),n(200)),k=n(196),S=function(e){var t=e.displayTerm;return Object(g.jsx)("div",{className:"error-msg",children:Object(g.jsxs)(y.a,{severity:"warning",children:[Object(g.jsx)(k.a,{className:"msg",children:Object(g.jsx)("strong",{children:'Your search term "'.concat(t,'" did not match any recordings, please try again.')})}),Object(g.jsxs)("div",{className:"suggestion",children:[Object(g.jsx)("strong",{children:"Suggestions:"}),Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:"Check the spellings"}),Object(g.jsx)("li",{children:"Try a different term"}),Object(g.jsx)("li",{children:"Try a shorter term"})]})]})]})})},T=n(197),N=n(198),w=n(202),C=n(203),E=n(199),R=n(74),U=n.n(R),V=(n(169),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleEnableSearch=function(){var e=a.props,t=e.class_id,n=e.dev,s=a.state.search_enabled,r=!1;s||(r=!0),a.setState({search_enabled:r}),x(n).searchEnable(r,t).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){a.setState({search_enabled:!r})}))},a.handleUploadNotifications=function(){var e=a.state.upload_notifications,t=a.props,n=t.class_id,s=t.user_id,r=t.dev,i=!1;e||(i=!0),a.setState({upload_notifications:i}),x(r).uploadNotificationEnable(i,n,s).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){a.setState({upload_notifications:!i})}))},a.handleWeeklyReports=function(){var e=a.state.weekly_reports,t=a.props,n=t.class_id,s=t.user_id,r=t.dev,i=!1;e||(i=!0),a.setState({weekly_reports:i}),x(r).weeklyReportEnable(i,n,s).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).catch((function(e){a.setState({weekly_reports:!e.reports_enabled})}))},a.toggleSettings=function(e){e.preventDefault();var t=a.state.expand;a.setState({expand:!t})},a.state={expand:!0,search_enabled:a.props.search_enabled,weekly_reports:a.props.weekly_reports,upload_notifications:a.props.upload_notifications,initial_disable:a.props.initial_disable},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.expand,a=t.search_enabled,s=this.props.initial_disable,r=function(){return Object(g.jsxs)(C.a,{className:"settings-button",rel:"noopener noreferrer",onClick:e.toggleSettings,children:[Object(g.jsx)("span",{children:" Instructor Options "}),Object(g.jsx)(U.a,{})]})};return Object(g.jsxs)("div",{className:"settings",children:[Object(g.jsx)(r,{}),n?Object(g.jsx)(T.a,{className:"settings-options",children:Object(g.jsx)(E.a,{title:"You can disable student search during quizs or exams",placement:"bottom",children:Object(g.jsx)(N.a,{disabled:s,control:Object(g.jsx)(w.a,{checked:a,onChange:this.handleEnableSearch,name:"search_enabled",color:"primary"}),label:"Enable Student Searches"})})}):""]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.initial_disable!==t.initial_disable?{search_enabled:e.search_enabled,weekly_reports:e.weekly_reports,upload_notifications:e.upload_notifications,initial_disable:e.initial_disable}:null}}]),n}(s.a.Component)),F=n.p+"static/media/logo.90a3a46e.png",q=(n(171),function(){return Object(g.jsxs)("div",{className:"logo-spinner",children:[Object(g.jsx)("img",{className:"logo",src:F,alt:"logo",width:"300px"}),Object(g.jsx)("div",{className:"dot-pulse"})]})}),D=(n(172),n.p+"static/media/logo_icon.01b372da.png"),W=n(76),Z=n.n(W),Y=n(77),M=n.n(Y),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.searchCount,s=t.course_id,r=t.queryTerm;""!==r&&(a.setState({loading:!0}),x(a.props.dev).search(s,r).then((function(e){if(!e.ok)throw Error(e.statusText);return e.data})).then((function(e){e.recordings[r]&&0!==Object.keys(e.recordings[r]).length?a.setState({searchCount:n+1,definition:e.definition,apiResponse:e.recordings[r],displayTerm:r,error:!1,loading:!1}):a.setState({error:!0,displayTerm:r,loading:!1})})).catch((function(e){return console.error(e)})))},a.handleChange=function(e){e.preventDefault(),a.setState({queryTerm:e.target.value})},a.clearSearch=function(e){e.preventDefault(),a.setState({searchCount:0,error:!1,queryTerm:"",loading:!1})},a.state={course_id:a.props.course_id,canvas_user_id:a.props.canvas_user_id,user_username:a.props.user_username,user_login_id:a.props.user_login_id,searchCount:0,apiResponse:{},queryTerm:"",displayTerm:"",definition:"",error:!1,loading:!1,class_id:null,user_id:null,email:a.props.unique_name+"@umich.edu",site_key:a.props.site_key,search_enabled:!1,weekly_reports:!1,upload_notifications:!1,initial_disable:!0},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=function(){return Object(g.jsxs)(C.a,{className:"feedback-button",href:"https://forms.gle/PRZDceU3AfWmZW7j9",target:"_blank",rel:"noopener noreferrer",children:[Object(g.jsx)("span",{children:" Send Feedback "}),Object(g.jsx)(Z.a,{})]})},n=this.state,a=n.searchCount,s=n.apiResponse,r=n.displayTerm,i=n.error,c=n.loading,o=Object(p.a)(n,["searchCount","apiResponse","displayTerm","error","loading"]),l=Object(g.jsx)("div",{className:"header",children:Object(g.jsxs)("form",{className:"search-form",onSubmit:this.handleSubmit,children:[Object(g.jsxs)("div",{className:"search-flex",children:[Object(g.jsx)("img",{className:"logo-icon",src:D,alt:"logoIcon",width:"50px",onClick:this.clearSearch}),Object(g.jsx)("input",{className:"search-bar",placeholder:"Search for a term or phrase",onChange:this.handleChange,type:"text",value:this.state.queryTerm}),Object(g.jsx)("button",{className:"search-button",type:"submit",onSubmit:this.handleSubmit,children:Object(g.jsx)(M.a,{color:"action"})}),this.props.is_instructor?Object(g.jsx)(V,Object(u.a)({dev:this.props.dev},o)):""]}),Object(g.jsx)(t,{})]})}),d=0,h=Object.keys(s).map((function(t){return Object(g.jsx)(O,{vid:t,name:s[t].title,date:s[t].vid_date,imageUrl:s[t].image,videoUrl:s[t].video_link,embedToken:e.props.embedToken,timestamps:s[t].timestamps,uploadSrc:s[t].upload_src,dev:e.props.dev},d++)}));return c?Object(g.jsx)(q,{}):i?Object(g.jsxs)("div",{children:[l,Object(g.jsx)(S,{displayTerm:r})]}):0===a?Object(g.jsx)("div",{children:l}):Object(g.jsxs)("div",{children:[l,Object(g.jsxs)("div",{className:"search-results",children:[Object(g.jsx)("div",{className:"term-definition",children:Object(g.jsx)("div",{className:"definition",children:"".concat(this.state.definition)})}),Object(g.jsx)("div",{className:"result-list",children:h})]})]})}}]),n}(s.a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state={course_id:a.props.course_id,canvas_user_id:a.props.canvas_user_id,user_username:a.props.user_username,user_login_id:a.props.user_login_id,is_instructor:a.props.is_instructor,site_key:null,uniquename:null,owner_manager:!1},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state,t=e.user_login_id,n=e.course_id;return null===t||null===n?Object(g.jsx)(q,{}):Object(g.jsx)("div",{children:Object(g.jsx)(L,{course_id:n,canvas_user_id:this.state.canvas_user_id,user_username:this.state.user_username,user_login_id:t,is_instructor:this.state.is_instructor,site_key:this.state.site_key,unique_name:this.state.uniquename,embedToken:this.props.embedToken,owner_manager:this.state.owner_manager,dev:this.props.dev})})}}]),n}(s.a.Component);var A=function(){var e=document.querySelector('meta[name="course_id"]').content,t=document.querySelector('meta[name="canvas_user_id"]').content,n=document.querySelector('meta[name="user_username"]').content,a=document.querySelector('meta[name="user_login_id"]').content,s="True"===document.querySelector('meta[name="is_instructor"]').content;return Object(g.jsx)("div",{className:"App",children:Object(g.jsx)(z,{course_id:e,canvas_user_id:t,user_username:n,user_login_id:a,is_instructor:s,dev:!1,userToken:"ekx4TFF5QVJiL2l6dW9jclRoRTNSOUxqMDN4ZmoxZjRlaGlRUmJJb3kzRXhGNEhjeW5BUU5QQ0dkY2VGWjhteHhXVDRKbWhIRjdMcEVRenFYZndDMFFySll3NXVmRVVma1hVckFnSi9BNWVQUU1CajZxMmFaYzMxWmxkUFRqY2g5VEpEWTU3V0N3bHdMWU1CWGN2aTdia3Ztbk9RQ0NobzBTWTRoN0E9",embedToken:"SERhZm5taTFiYm9aejFJUDNsOENVaEpXYWN4Z0hGZUlnU3U1VExlaVA1VXVYa3BuZnlyNEg1UzJNY2NoOUZ0VndEY3RyTGNXNThsbkN4SnlVVlpEKzdLZkhvakt2eEE9"})})},B=(n(173),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,205)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))});i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(A,{})}),document.getElementById("root")),B()},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){}},[[174,1,2]]]);
//# sourceMappingURL=main.30187028.chunk.js.map